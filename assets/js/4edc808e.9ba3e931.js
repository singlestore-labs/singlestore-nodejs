"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[308],{1470:(e,n,s)=>{s.d(n,{A:()=>S});var t=s(6540),o=s(4164),r=s(7559),a=s(3104),i=s(6347),l=s(205),c=s(7485),d=s(1682),u=s(679);function h(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:s}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return h(e).map((({props:{value:e,label:n,attributes:s,default:t}})=>({value:e,label:n,attributes:s,default:t})))}(s);return function(e){const n=(0,d.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,s])}function m({value:e,tabValues:n}){return n.some((n=>n.value===e))}function g({queryString:e=!1,groupId:n}){const s=(0,i.W6)(),o=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c.aZ)(o),(0,t.useCallback)((e=>{if(!o)return;const n=new URLSearchParams(s.location.search);n.set(o,e),s.replace({...s.location,search:n.toString()})}),[o,s])]}function j(e){const{defaultValue:n,queryString:s=!1,groupId:o}=e,r=p(e),[a,i]=(0,t.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const s=n.find((e=>e.default))??n[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:r}))),[c,d]=g({queryString:s,groupId:o}),[h,j]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[s,o]=(0,u.Dv)(n);return[s,(0,t.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:o}),x=(()=>{const e=c??h;return m({value:e,tabValues:r})?e:null})();(0,l.A)((()=>{x&&i(x)}),[x]);return{selectedValue:a,selectValue:(0,t.useCallback)((e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);i(e),d(e),j(e)}),[d,j,r]),tabValues:r}}var x=s(2303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=s(4848);function y({className:e,block:n,selectedValue:s,selectValue:t,tabValues:r}){const i=[],{blockElementScrollPositionUntilNextRender:l}=(0,a.a_)(),c=e=>{const n=e.currentTarget,o=i.indexOf(n),a=r[o].value;a!==s&&(l(n),t(a))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const s=i.indexOf(e.currentTarget)+1;n=i[s]??i[0];break}case"ArrowLeft":{const s=i.indexOf(e.currentTarget)-1;n=i[s]??i[i.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.A)("tabs",{"tabs--block":n},e),children:r.map((({value:e,label:n,attributes:t})=>(0,b.jsx)("li",{role:"tab",tabIndex:s===e?0:-1,"aria-selected":s===e,ref:e=>{i.push(e)},onKeyDown:d,onClick:c,...t,className:(0,o.A)("tabs__item",f.tabItem,t?.className,{"tabs__item--active":s===e}),children:n??e},e)))})}function v({lazy:e,children:n,selectedValue:s}){const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=r.find((e=>e.props.value===s));return e?(0,t.cloneElement)(e,{className:(0,o.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function w(e){const n=j(e);return(0,b.jsxs)("div",{className:(0,o.A)(r.G.tabs.container,"tabs-container",f.tabList),children:[(0,b.jsx)(y,{...n,...e}),(0,b.jsx)(v,{...n,...e})]})}function S(e){const n=(0,x.A)();return(0,b.jsx)(w,{...e,children:h(e.children)},String(n))}},1747:(e,n,s)=>{s.d(n,{s:()=>r});var t=s(5260),o=s(4848);const r=({title:e})=>(0,o.jsx)(t.A,{children:(0,o.jsx)("title",{children:e})})},6215:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>u,contentTitle:()=>d,default:()=>m,frontMatter:()=>c,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"index","title":"Quickstart","description":"SingleStore client for Node.js with focus on performance","source":"@site/docs/index.mdx","sourceDirName":".","slug":"/","permalink":"/singlestore-nodejs/docs/","draft":false,"unlisted":false,"editUrl":"https://github.com/sidorares/node-mysql2/tree/master/website/docs/index.mdx","tags":[],"version":"current","frontMatter":{"slug":"/","position":1,"title":"Quickstart","description":"SingleStore client for Node.js with focus on performance"},"sidebar":"docs","next":{"title":"History and Why SingleStore Node.js Driver","permalink":"/singlestore-nodejs/docs/history-and-why-mysq2"}}');var o=s(4848),r=s(8453),a=s(1470),i=s(9365),l=s(1747);const c={slug:"/",position:1,title:"Quickstart",description:"SingleStore client for Node.js with focus on performance"},d="SingleStore-Nodejs",u={},h=[{value:"Installation",id:"installation",level:2},{value:"First Query",id:"first-query",level:3},{value:"Using Prepared Statements",id:"using-prepared-statements",level:3},{value:"Using Connection Pools",id:"using-connection-pools",level:3},{value:"Using Promise Wrapper",id:"using-promise-wrapper",level:3},{value:"Array Results",id:"array-results",level:3},{value:"Connection Level",id:"connection-level",level:4},{value:"Query Level",id:"query-level",level:4}];function p(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.s,{title:"SingleStore-Nodejs | Quickstart"}),"\n",(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"singlestore-nodejs",children:"SingleStore-Nodejs"})}),"\n","\n",(0,o.jsx)(n.p,{children:"SingleStore client for Node.js with focus on performance. Supports configurable connection behavior, prepared statements, compression, ssl and much more."}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://npmjs.org/package/singlestore-nodejs",children:(0,o.jsx)(n.img,{src:"https://img.shields.io/npm/v/singlestore-nodejs.svg",alt:"NPM Version"})}),"\n",(0,o.jsx)(n.a,{href:"https://npmjs.org/package/singlestore-nodejs",children:(0,o.jsx)(n.img,{src:"https://img.shields.io/npm/dm/singlestore-nodejs.svg",alt:"NPM Downloads"})}),"\n",(0,o.jsx)(n.a,{href:"https://nodejs.org/download/",children:(0,o.jsx)(n.img,{src:"https://img.shields.io/node/v/singlestore-nodejs.svg",alt:"Node.js Version"})}),"\n",(0,o.jsx)(n.a,{href:"https://github.com/sidorares/node-mysql2/blob/master/License",children:(0,o.jsx)(n.img,{src:"https://img.shields.io/npm/l/mysql2.svg?maxAge=2592000",alt:"License"})})]}),"\n",(0,o.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,o.jsx)(n.p,{children:"SingleStore-Nodejs is free from native bindings and can be installed on Linux, Mac OS or Windows without any issues."}),"\n",(0,o.jsxs)(a.A,{children:[(0,o.jsx)(i.A,{value:"JavaScript",default:!0,children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"npm install --save singlestore-nodejs\n"})})}),(0,o.jsxs)(i.A,{value:"TypeScript",children:[(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"npm install --save singlestore-nodejs\nnpm install --save-dev @types/node\n"})}),(0,o.jsxs)(n.p,{children:["For TypeScript documentation and examples, see ",(0,o.jsx)(n.a,{href:"/docs/documentation/typescript-examples",children:"here"}),"."]})]})]}),"\n",(0,o.jsx)("hr",{}),"\n",(0,o.jsx)(n.h3,{id:"first-query",children:"First Query"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["To explore more queries examples, please visit the example sections ",(0,o.jsx)(n.a,{href:"/docs/examples/queries/simple-queries",children:(0,o.jsx)(n.strong,{children:"Simple Queries"})})," and ",(0,o.jsx)(n.a,{href:"/docs/examples/queries/prepared-statements",children:(0,o.jsx)(n.strong,{children:"Prepared Statements"})}),"."]}),"\n"]}),"\n",(0,o.jsxs)(a.A,{children:[(0,o.jsx)(i.A,{value:"Promise",default:!0,children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"// Get the client\nimport singlestore from 'singlestore-nodejs/promise';\n\n// Create the connection to database\nconst connection = await singlestore.createConnection({\n  host: 'localhost',\n  user: 'root',\n  database: 'test',\n});\n\n// A simple SELECT query\ntry {\n  const [results, fields] = await connection.query(\n    'SELECT * FROM `table` WHERE `name` = \"Page\" AND `age` > 45'\n  );\n\n  console.log(results); // results contains rows returned by server\n  console.log(fields); // fields contains extra meta data about results, if available\n} catch (err) {\n  console.log(err);\n}\n\n// Using placeholders\ntry {\n  const [results] = await connection.query(\n    'SELECT * FROM `table` WHERE `name` = ? AND `age` > ?',\n    ['Page', 45]\n  );\n\n  console.log(results);\n} catch (err) {\n  console.log(err);\n}\n"})})}),(0,o.jsx)(i.A,{value:"Callback",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"// Get the client\nconst singlestore = require('singlestore-nodejs');\n\n// Create the connection to database\nconst connection = singlestore.createConnection({\n  host: 'localhost',\n  user: 'root',\n  database: 'test',\n});\n\n// A simple SELECT query\nconnection.query(\n  'SELECT * FROM `table` WHERE `name` = \"Page\" AND `age` > 45',\n  function (err, results, fields) {\n    console.log(results); // results contains rows returned by server\n    console.log(fields); // fields contains extra meta data about results, if available\n  }\n);\n\n// Using placeholders\nconnection.query(\n  'SELECT * FROM `table` WHERE `name` = ? AND `age` > ?',\n  ['Page', 45],\n  function (err, results) {\n    console.log(results);\n  }\n);\n"})})})]}),"\n",(0,o.jsx)("hr",{}),"\n",(0,o.jsx)(n.h3,{id:"using-prepared-statements",children:"Using Prepared Statements"}),"\n",(0,o.jsxs)(n.p,{children:["SingleStore-Nodejs supports prepared statements primarily for compatibility with MySQL drivers and existing codebases. However, ",(0,o.jsx)(n.strong,{children:"SingleStore automatically compiles and optimizes both text and binary protocol queries"}),", so you get performance benefits even with regular queries."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Important Notes:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"SingleStore compiles queries sent through both text and binary protocols automatically"}),"\n",(0,o.jsxs)(n.li,{children:["You get query optimization benefits with regular ",(0,o.jsx)(n.code,{children:".query()"})," calls"]}),"\n",(0,o.jsxs)(n.li,{children:["Some queries (like ",(0,o.jsx)(n.code,{children:"EXPLAIN"}),", ",(0,o.jsx)(n.code,{children:"SHOW"})," commands) cannot be run as prepared statements"]}),"\n",(0,o.jsxs)(n.li,{children:["Manual preparation with ",(0,o.jsx)(n.code,{children:"prepare"}),"/",(0,o.jsx)(n.code,{children:"unprepare"})," methods is generally not recommended"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"If you don't know why prepared statements are traditionally important in other databases, please check these discussions:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://stackoverflow.com/questions/8263371/how-can-prepared-statements-protect-from-sql-injection-attacks",children:"How prepared statements can protect from SQL Injection attacks"})}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["SingleStore-Nodejs provides ",(0,o.jsx)(n.code,{children:"execute"})," helper for compatibility. You can also manually prepare / unprepare statements with ",(0,o.jsx)(n.code,{children:"prepare"})," / ",(0,o.jsx)(n.code,{children:"unprepare"})," methods if needed for compatibility, but regular queries are typically preferred."]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["To explore more Prepared Statements and Placeholders examples, please visit the example section ",(0,o.jsx)(n.a,{href:"/docs/examples/queries/prepared-statements",children:(0,o.jsx)(n.strong,{children:"Prepared Statements"})}),"."]}),"\n"]}),"\n",(0,o.jsxs)(a.A,{children:[(0,o.jsx)(i.A,{value:"Promise",default:!0,children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import singlestore from 'singlestore-nodejs/promise';\n\ntry {\n  // create the connection to database\n  const connection = await singlestore.createConnection({\n    host: 'localhost',\n    user: 'root',\n    database: 'test',\n  });\n\n  // execute will internally call prepare and query\n  const [results, fields] = await connection.execute(\n    'SELECT * FROM `table` WHERE `name` = ? AND `age` > ?',\n    ['Rick C-137', 53]\n  );\n\n  console.log(results); // results contains rows returned by server\n  console.log(fields); // fields contains extra meta data about results, if available\n} catch (err) {\n  console.log(err);\n}\n"})})}),(0,o.jsx)(i.A,{value:"Callback",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"const singlestore = require('singlestore-nodejs');\n\n// create the connection to database\nconst connection = singlestore.createConnection({\n  host: 'localhost',\n  user: 'root',\n  database: 'test',\n});\n\n// execute will internally call prepare and query\nconnection.execute(\n  'SELECT * FROM `table` WHERE `name` = ? AND `age` > ?',\n  ['Rick C-137', 53],\n  function (err, results, fields) {\n    console.log(results); // results contains rows returned by server\n    console.log(fields); // fields contains extra meta data about results, if available\n  }\n);\n"})})})]}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsx)(n.p,{children:"If you execute same statement again, it will be picked from a LRU cache which will save query preparation time and give better performance."})}),"\n",(0,o.jsx)("hr",{}),"\n",(0,o.jsx)(n.h3,{id:"using-connection-pools",children:"Using Connection Pools"}),"\n",(0,o.jsx)(n.p,{children:"Connection pools help reduce the time spent connecting to the SingleStore server by reusing a previous connection, leaving them open instead of closing when you are done with them."}),"\n",(0,o.jsx)(n.p,{children:"This improves the latency of queries as you avoid all of the overhead that comes with establishing a new connection."}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["To explore more Connection Pools examples, please visit the example section ",(0,o.jsx)(n.a,{href:"/docs/examples/connections/create-pool",children:(0,o.jsx)(n.strong,{children:"createPool"})}),"."]}),"\n"]}),"\n",(0,o.jsxs)(a.A,{children:[(0,o.jsx)(i.A,{value:"Promise",default:!0,children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import singlestore from 'singlestore-nodejs/promise';\n\n// Create the connection pool. The pool-specific settings are the defaults\nconst pool = singlestore.createPool({\n  host: 'localhost',\n  user: 'root',\n  database: 'test',\n  waitForConnections: true,\n  connectionLimit: 10,\n  maxIdle: 10, // max idle connections, the default value is the same as `connectionLimit`\n  idleTimeout: 60000, // idle connections timeout, in milliseconds, the default value 60000\n  queueLimit: 0,\n  enableKeepAlive: true,\n  keepAliveInitialDelay: 0,\n});\n"})})}),(0,o.jsx)(i.A,{value:"Callback",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"const singlestore = require('singlestore-nodejs');\n\n// Create the connection pool. The pool-specific settings are the defaults\nconst pool = singlestore.createPool({\n  host: 'localhost',\n  user: 'root',\n  database: 'test',\n  waitForConnections: true,\n  connectionLimit: 10,\n  maxIdle: 10, // max idle connections, the default value is the same as `connectionLimit`\n  idleTimeout: 60000, // idle connections timeout, in milliseconds, the default value 60000\n  queueLimit: 0,\n  enableKeepAlive: true,\n  keepAliveInitialDelay: 0,\n});\n"})})})]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"The pool does not create all connections upfront but creates them on demand until the connection limit is reached."})}),"\n",(0,o.jsx)("hr",{}),"\n",(0,o.jsxs)(n.p,{children:["You can use the pool in the same way as connections (using ",(0,o.jsx)(n.code,{children:"pool.query()"})," and ",(0,o.jsx)(n.code,{children:"pool.execute()"}),"):"]}),"\n",(0,o.jsxs)(a.A,{children:[(0,o.jsx)(i.A,{value:"Promise",default:!0,children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"try {\n  // For pool initialization, see above\n  const [rows, fields] = await pool.query('SELECT `field` FROM `table`');\n  // Connection is automatically released when query resolves\n} catch (err) {\n  console.log(err);\n}\n"})})}),(0,o.jsx)(i.A,{value:"Callback",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"// For pool initialization, see above\npool.query('SELECT `field` FROM `table`', function (err, rows, fields) {\n  // Connection is automatically released when query resolves\n});\n"})})})]}),"\n",(0,o.jsx)(n.p,{children:"Alternatively, there is also the possibility of manually acquiring a connection from the pool and returning it later:"}),"\n",(0,o.jsxs)(a.A,{children:[(0,o.jsx)(i.A,{value:"Promise",default:!0,children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"// For pool initialization, see above\nconst conn = await pool.getConnection();\n\n// Do something with the connection\nawait conn.query(/* ... */);\n\n// Don't forget to release the connection when finished!\npool.releaseConnection(conn);\n"})})}),(0,o.jsx)(i.A,{value:"Callback",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"// For pool initialization, see above\npool.getConnection(function (err, conn) {\n  // Do something with the connection\n  conn.query(/* ... */);\n\n  // Don't forget to release the connection when finished!\n  pool.releaseConnection(conn);\n});\n"})})})]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Additionally, directly release the connection using the ",(0,o.jsx)(n.code,{children:"connection"})," object:"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"conn.release();\n"})}),"\n",(0,o.jsx)("hr",{}),"\n",(0,o.jsx)(n.h3,{id:"using-promise-wrapper",children:"Using Promise Wrapper"}),"\n",(0,o.jsx)(n.p,{children:"SingleStore-Nodejs also supports Promise API. Which works very well with ES7 async await."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import singlestore from 'singlestore-nodejs/promise';\n\nasync function main() {\n  // create the connection\n  const connection = await singlestore.createConnection({\n    host: 'localhost',\n    user: 'root',\n    database: 'test',\n  });\n\n  // query database\n  const [rows, fields] = await connection.execute(\n    'SELECT * FROM `table` WHERE `name` = ? AND `age` > ?',\n    ['Morty', 14]\n  );\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:["SingleStore-Nodejs uses default ",(0,o.jsx)(n.code,{children:"Promise"})," object available in scope. But you can choose which ",(0,o.jsx)(n.code,{children:"Promise"})," implementation you want to use."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"// get the client\nimport singlestore from 'singlestore-nodejs/promise';\n\n// get the promise implementation, we will use bluebird\nimport bluebird from 'bluebird';\n\n// create the connection, specify bluebird as Promise\nconst connection = await singlestore.createConnection({\n  host: 'localhost',\n  user: 'root',\n  database: 'test',\n  Promise: bluebird,\n});\n\n// query database\nconst [rows, fields] = await connection.execute(\n  'SELECT * FROM `table` WHERE `name` = ? AND `age` > ?',\n  ['Morty', 14]\n);\n"})}),"\n",(0,o.jsxs)(n.p,{children:["SingleStore-Nodejs also exposes a ",(0,o.jsx)(n.code,{children:".promise()"})," function on Pools, so you can create a promise/non-promise connections from the same pool."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import singlestore from 'singlestore-nodejs';\n\nasync function main() {\n  // create the pool\n  const pool = singlestore.createPool({\n    host: 'localhost',\n    user: 'root',\n    database: 'test',\n  });\n\n  // now get a Promise wrapped instance of that pool\n  const promisePool = pool.promise();\n\n  // query database using promises\n  const [rows, fields] = await promisePool.query('SELECT 1');\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:["SingleStore-Nodejs exposes a ",(0,o.jsx)(n.code,{children:".promise()"}),' function on Connections, to "upgrade" an existing non-promise connection to use promise.']}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:"{11}",children:"const singlestore = require('singlestore-nodejs');\n\n// create the connection\nconst conn = singlestore.createConnection({\n  host: 'localhost',\n  user: 'root',\n  database: 'test',\n});\n\nconn\n  .promise()\n  .query('SELECT 1')\n  .then(([rows, fields]) => {\n    console.log(rows);\n  })\n  .catch(console.log)\n  .then(() => conn.end());\n"})}),"\n",(0,o.jsx)("hr",{}),"\n",(0,o.jsx)(n.h3,{id:"array-results",children:"Array Results"}),"\n",(0,o.jsxs)(n.p,{children:["If you have two columns with the same name, you might want to get results as an array rather than an object to prevent them from clashing. This is a deviation from the ",(0,o.jsx)(n.a,{href:"https://github.com/mysqljs/mysql",children:"Node MySQL"})," library."]}),"\n",(0,o.jsxs)(n.p,{children:["For example: ",(0,o.jsx)(n.code,{children:"SELECT 1 AS `foo`, 2 AS `foo`"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"You can enable this setting at either the connection level (applies to all queries), or at the query level (applies only to that specific query)."}),"\n",(0,o.jsx)(n.h4,{id:"connection-level",children:"Connection Level"}),"\n",(0,o.jsxs)(a.A,{children:[(0,o.jsx)(i.A,{value:"Promise",default:!0,children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:"{5}",children:"const conn = await singlestore.createConnection({\n  host: 'localhost',\n  database: 'test',\n  user: 'root',\n  rowsAsArray: true,\n});\n"})})}),(0,o.jsx)(i.A,{value:"Callback",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:"{5}",children:"const conn = singlestore.createConnection({\n  host: 'localhost',\n  database: 'test',\n  user: 'root',\n  rowsAsArray: true,\n});\n"})})})]}),"\n",(0,o.jsx)(n.h4,{id:"query-level",children:"Query Level"}),"\n",(0,o.jsxs)(a.A,{children:[(0,o.jsx)(i.A,{value:"Promise",default:!0,children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:"{4}",children:"try {\n  const [results, fields] = await conn.query({\n    sql: 'SELECT 1 AS `foo`, 2 AS `foo`',\n    rowsAsArray: true,\n  });\n\n  console.log(results); // in this query, results will be an array of arrays rather than an array of objects\n  console.log(fields); // fields are unchanged\n} catch (err) {\n  console.log(err);\n}\n"})})}),(0,o.jsx)(i.A,{value:"Callback",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",metastring:"{4}",children:"conn.query(\n  {\n    sql: 'SELECT 1 AS `foo`, 2 AS `foo`',\n    rowsAsArray: true,\n  },\n  function (err, results, fields) {\n    console.log(results); // in this query, results will be an array of arrays rather than an array of objects\n    console.log(fields); // fields are unchanged\n  }\n);\n"})})})]}),"\n",(0,o.jsx)("hr",{}),"\n",(0,o.jsx)(n.admonition,{title:"Getting Help",type:"tip",children:(0,o.jsxs)(n.p,{children:["Need help? Ask your question on ",(0,o.jsx)(n.a,{href:"https://stackoverflow.com/questions/tagged/singlestore-nodejs",children:"Stack Overflow"})," or ",(0,o.jsx)(n.a,{href:"https://github.com/singlestore-labs/singlestore-nodejs/discussions",children:"GitHub"}),".\nIf you've encountered an issue, please ",(0,o.jsx)(n.a,{href:"https://github.com/singlestore-labs/singlestore-nodejs/issues",children:"file it on GitHub"}),"."]})})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>i});var t=s(6540);const o={},r=t.createContext(o);function a(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),t.createElement(r.Provider,{value:n},e.children)}},9365:(e,n,s)=>{s.d(n,{A:()=>a});s(6540);var t=s(4164);const o={tabItem:"tabItem_Ymn6"};var r=s(4848);function a({children:e,hidden:n,className:s}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,t.A)(o.tabItem,s),hidden:n,children:e})}}}]);